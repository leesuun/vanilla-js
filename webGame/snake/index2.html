<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="UTF-8" />
        <meta http-equiv="X-UA-Compatible" content="IE=edge" />
        <meta name="viewport" content="width=device-width, initial-scale=1.0" />
        <title>스네이크 게임</title>
        <style>
            * {
                margin: 0;
                padding: 0;
                box-sizing: border-box;
            }
            .snake {
                margin: 3rem auto;
                width: 603px;
                height: 673px;
                border: 2rem ridge #618024;
            }
            .state-bar {
                display: flex;
                justify-content: center;
                align-items: center;
                padding: 0.5rem;
                gap: 1rem;
                background-color: #d14fd1;
                height: 70px;
            }

            .state-bar div {
                font-size: 1.2rem;
            }
            .state-bar p {
                margin-left: 2.5rem;
            }

            .table {
                /* width: 100%; */
                border-collapse: collapse;
                height: 466px;
            }

            .table td {
                /* border: 1px solid black; */

                width: 27px;
                height: 27px;
            }
        </style>
    </head>
    <body>
        <div class="snake">
            <div class="state-bar">
                <div class="score">점수: 1000</div>
                <div class="time">시간: 00:00</div>
                <p>[시작: SPACE] &nbsp;[정지: ESC]&nbsp; [리셋: R]</p>
            </div>
            <table id="table" class="table"></table>
        </div>
        <script>
            "use strict";
            const table = document.querySelector("#table");

            const row = 20;
            const cell = 20;

            const Snake = {
                size: 4,

                sizeUp() {
                    console.log("사이즈업");
                    this.size += 1;
                },
                moveUp() {
                    console.log("위로");
                },
                moveDown() {
                    console.log("아래로");
                },
                moveLeft() {
                    console.log("좌로");
                },
                moveRight() {
                    console.log("우로");
                },
            };

            const CODE = {
                BLANK: 0, //빈 공간
                SNAKE: 1, //뱀 위치한 공간
                FEED: 2, //먹이 위치한 공간
            };

            let snake = Array(4).fill(1);

            //테이블 데이터 생성
            let snakeData = [];

            // snakeData.forEach((data) => {
            //     data.push(CODE.BLANK);
            // });

            function createSnake() {
                // snakeData.forEach((row, rI) => {
                //     row.forEach((cell, cI) => {
                //         if (rI === 1 && cI === 10) {
                //             snakeData[10][10] = 1;
                //         }
                //     });
                // });
                // snakeData[19][6] = 1;
            }

            // 테이블 draw
            function drawTable() {
                snakeData = Array(row * cell).fill(0);
                const fragment = document.createDocumentFragment();
                snakeData.forEach((row, rI) => {
                    const tr = document.createElement("tr");
                    row.forEach((cell, cI) => {
                        const td = document.createElement("td");
                        if ((!(rI % 2) && !(cI % 2)) || (rI % 2 && cI % 2)) {
                            td.style.background = "#A9D751";
                        } else {
                            td.style.background = "#a3d14a";
                        }
                        tr.appendChild(td);
                    });
                    fragment.appendChild(tr);
                });
                table.appendChild(fragment);
            }

            function handleKeyInput(event) {
                const { code } = event;

                switch (code) {
                    case "Space":
                        // 게임 진행
                        break;
                    case "Escape":
                        // 게임 정지
                        break;
                    case "KeyR":
                        // 게임 리셋
                        break;
                    case "ArrowUp":
                        // 위로 이동
                        break;
                    case "ArrowDown":
                        // 아래로 이동
                        break;
                    case "ArrowLeft":
                        // 좌로 이동
                        break;
                    case "ArrowRight":
                        // 우로 이동
                        break;
                }
            }

            drawTable();
            // createSnake();

            window.addEventListener("keyup", handleKeyInput);
        </script>
    </body>
</html>

<!-- 
    1. 프론트 기본 구조 작성
    2. 테이블 작성 20 x 20 , 27px
    3. 테이블 그리기
    4. 게임 컨트롤 key 이벤트 받기
    5. 뱀 만들어서 테이블 데이터에 일치 시켜보기

 -->
